<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #333;
            color: white;
            padding: 10px 20px;
        }
        .nav-buttons {
            display: flex;
            gap: 10px;
        }
        .nav-buttons a {
            text-decoration: none;
            color: white;
            background-color: #555;
            padding: 10px 15px;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        .nav-buttons a:hover {
            background-color: #777;
        }
        main {
            padding: 20px;
            text-align: left;
        }
        h1, h2 {
            color: #333;
        }
        p {
            line-height: 1.6;
            color: #555;
        }
        ul {
            padding-left: 20px;
        }
        ul li {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <header>
        <div style="display: flex; align-items: center;">
            <img src="images/gust_logo.png" alt="GUST Logo" style="height: 75px; margin-right: 10px;">
            <h1>Documentation</h1>
        </div>
        <div class="nav-buttons">
          <a href="index.html">Home</a>
          <a href="team.html">About Us</a>
          <a href="deliverables">Deliverables</a>
          <a href="docs.html">Docs</a>
          <a href="guide.html">Start Guide</a>
        </div>
    </header>
    <main>
        <h2>Welcome to the Documentation</h2>
        <p>This page provides detailed information about the GUSTv2 project, its features, and how to use it effectively.</p>
        
        <h2>Table of Contents</h2>
        <ul>
            <li><a href="#introduction">Introduction</a></li>
            <li><a href="#features">Features</a></li>
            <li><a href="#setup">Setup Instructions</a></li>
            <li><a href="#usage">Usage Guide</a></li>
            <li><a href="#faq">FAQ</a></li>
        </ul>

        <h2 id="introduction">Introduction</h2>
        <p>GUSTv2 is an open-source ground control system for planning missions and controlling teams and swarms of uncrewed vehicles. It is designed to be simple to use and highly customizable.</p>

        <h2 id="features">Features</h2>
        <ul>
            <li>Real-time telemetry and sensor streaming</li>
            <li>Mission planning and execution</li>
            <li>Multi-vehicle support</li>
            <li>Emergency protocols</li>
            <li>Customizable path design</li>
        </ul>

        <h2 id="how-to-use">How to Use GUST</h2>
        <h3 id="screens">Screens</h3>
        <p>GUST is organized into three screens. The first screen is the telemetry and flight screen. After a maneuver has been planned, it will appear in the left column. Selecting a maneuver will populate the map with all vehicles included in the maneuver. A list of these vehicles will appear in the list to the right of the map.</p>
        <p>The second screen is the planning screen. On the left is the maneuver selector and vehicle selctor. Here you can create, delete, and select maneuvers. To plan a path for a vehicle, select a maneuver, select the vehicle you want to plan for, and click "start new path". Click on the new tab that appeared in the point editor on the right side of the screen to see the points as you select them. Next, click on the map to drop waypoints for you path. When you are finished, click "Add to maneuver". You should see the maneuver you selected now has a drone and path tied to it on the left side of the screen. You can only have one path per vehicle per maneuver. By selecting a path in the point editor on the right side of the screen, you can delete points from the path. When you select a path, you can press the export button to download a csv of the selected path.</p>
        <p>The third screen is the connection screen. This screen is not fully implemented yet and is still considered a WIP</p>
        <h2 id="setup">Front End Set Up</h2>
        <p>The front end will be eventually compiled in a binary that can be installed and ran. However, for now, to run the front end simply navigate to the gust-react directory and run the command "npm run dev". This is the best option if you would like to be able to easily modify the front end on the fly. Alternatively, you can uncomment the react-app commands from the docker compose to auto start the app when you run the container</p>

        <h2 id="setup">Fast API Backend</h2>
        <p>The app runs on a fastAPI backend written in python 3 and run in a Ubuntu 22.04 docker container for development purposes. The app itself runs as an electron app.</p>
        <ol>
            <li>To view api endpoints visit localhost:8000/docs while the app is running</li>
            <li>Install the required dependencies using the provided <code>environment.yml</code> file.</li>
            <li>Run the Docker container using <code>docker compose up --build</code>.</li>
        </ol>
        
        <h2 id="setup">WSL 2 Install</h2>
        <p>To run the app, you will need to install WSL 2 on your Windows machine. Follow these steps:</p>
        <ol>
            <li>Open PowerShell as Administrator and run the following command:</li>
            <pre><code>wsl --install</code></pre>
            <li>Restart your computer when prompted.</li>
            <li>After restarting, open PowerShell again and run:</li>
            <pre><code>wsl --set-default-version 2</code></pre>
            <li>Install Ubuntu 22.04 from the Microsoft Store.</li>
        </ol>

        <h2 id="setup">Docker Compose V2 Setup</h2>
        <p>To set up Docker Compose V2, follow these steps:</p>
        <ol>
            <li>Open a terminal and run the following command to install Docker Compose V2:</li>
            <pre><code>docker compose version</code></pre>
            <li>Verify the installation by running:</li>
            <pre><code>docker compose --version</code></pre>
        </ol>

        <h2 id="setup">Hardware Setup</h2>
        <p> For single drone connections, using a Dragon Link radio is advised. For multiple, we used a Doodle Lab smart radio</p>
        <h3>Dragon Link Setup</h3>
        <ul>
            <li>Download the dragon link drivers onto your computer from http://www.dragonlinkrc.com/instructions/v3equipment/v3downloads/ and follow the install guide</li>
            <li>Connect the device via usb into your computer</li>
            <li>Open a CMD window and type "mode" to find the COM port of the device</li>
            <li>In an Admin CMD window, type "usbipd list" to display connected USB devices and get the busid, it is the one that says serial</li>
            <li>Expose the busid to WSL "usbipd attach --wsl --busid 5-1"</li>
            <li>In WSL, naviagate to /dev to view mounted devices, the device should show up as "/ttyUSB0 or /ttyACM0", this will be the connection string to the device for mavlink</li>
        <ul>
        <h3>Doodle Lab Setup</h3>
        <ul>
            <li>Connect the device via ethernet to your computer</li>
            <li>Open CMD and type "ipconfig /all" to view all devices, find the ethernet adapter of the radio</li>
            <li> In Windows Network Settings, Go to Advanced Network settings and locate the ethernet connection</li>
            <li>Click on the ethernet connection and select "Properties"</li>
            <li>Click on "Internet Protocol Version 4 (TCP/IPv4)" and enter 10.223.168.1 as the static IP</li>
            <li>Navigate to 10.223.168.25 in a browser and the webUI should open, this is where you can configure the radio</li>
        </ul>


        <h2 id="usage">How to contribute</h2>
        <p>The source code to this project can be found at: https://github.com/rickyrc123/GUSTv2.</p>
        <ul>
            <li>Fork the repository to your own GitHub account.</li>
            <li>Create a new branch for your feature or bug fix.</li>
            <li>Make your changes and commit them with clear messages.</li>
            <li>Push your changes to your forked repository.</li>
            <li>Create a pull request to the main repository.</li>
        </ul>
        

        <h2 id="extend"></h2>
        <p>GUST was written in React and python to make it easy to modify and extend. To add to the front end create your react components and store them in src/components. We store our stylesheets in the same directory as our components. To create a new api call, modify "FastAPI/fast_api_test_server.py". All new api endpoints can be accessed and tested by opening a browser and going to "http://localhost:8000/docs". Here you can test out new api calls using FastAPI's build in documentation.</p>
        <p>Our backlog can be viewed on the deliverables page. You can check the sprint3 backlog to see the latest goals and completed tasks.</p>
        <p>There are a few major issues that need to be resolved</p>
        <ul>
            <li>
                GUST currently runs fully in a docker container. The front end should be migrated to an electron app and the container should be started using an electron startup script
            </li>
            <li>
                GUST currently is only compatible with docker-compose v2. A version of the container should be written to support v1.
            </li>
            <li>
                The connection screen is currently only finished on the front end. In order for the app to be fully functional
            </li>
            <li>
                Incorporate offline mapping tiles so the user is not reliant on internet connection
            </li>
        </ul>
        <h2 id="faq">FAQ</h2>
        <p>Commonly asked questions:</p>
        <ul>
            <li>
                <h4>Front end started but is blank</h4>
                This commonly happens when dependencies have not been installed. If you are running the front end from the container your dependecies should already be installed. If you are running on your machine using npm and encountering this issue, navigate to the gust-react directory and run "npm install". Ensure that you have @mui/material installed and @emotion/styled.
            </li>
            <li>
                <h4>I created a new component but it is not getting data from the backend</h4>
                First check to make sure the backend is running. If it is go to the FastAPI docs page and test your enpoint. Additionally, ensure that your fetch request uses "http://localhost:8000/yourendpoint".
            </li>
            <li>
                <h4>The docker container errors when running</h4>
                Ensure you have docker-compose v2 installed instead of v1.
            </li>
            <li>
                <h4>I have planned a path but it is not getting added to my maneuver</h4>
                Ensure you have the path planned selected in the point selector before you click add to path.
            </li>
            <li>
                <h4>The application is started but neither maps are working</h4>
                The mapping comes from an online api called openstreet map so check you internet connection.
            </li>
        </ul>
    </main>
</body>
</html>